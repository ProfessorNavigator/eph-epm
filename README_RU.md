# EphEPM
EphEPM - программа для расчёта координат тел Солнечной системы.

## Описание
EphEPM использует эфемериды [EPM](https://iaaras.ru/dept/ephemeris/epm/) для расчёта координат. Программа также может построить график орбит.

## Установка
### Linux

`git clone https://github.com/ProfessorNavigator/eph-epm.git`\
`cd eph-epm`\
`cmake -DCMAKE_BUILD_TYPE=Release -B _build`\
`make -C _build install`

Вам могут потребоваться права суперпользователя для выполнения установки.

Префикс по умолчанию `/usr/local`.

### Windows

Вы можете скомпилировать программу EphEPM из исходного кода с помощью проекта MSYS2 [https://www.msys2.org/](https://www.msys2.org/). Для установки MSYS2 воспользуйтесь инструкцией по установке с сайта указанного проекта. Затем установите зависимости, указанные в секции `Зависимости` данного документа, и программу git. После чего создайте папку, в которую вы хотите скачать исходный код программы EphEPM (путь к данной папке должен содержать только латинские буквы и не должен содержать пробелов). Затем откройте консоль mingw и выполните следующие команды (в примере скачивание исходного кода происходит в C:\EphEPM, для сборки используется mingw32-make из пакета для ucrt64)

`mkdir /c/EphEPM`\
`cd /c/EphEPM`\
`git clone https://gitflic.ru/project/professornavigator/eph-epm.git`\
`cd eph-epm`\
`cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/ucrt64 -DCMAKE_CXX_FLAGS="-mwindows" -G"MinGW Makefiles" -B _build`\
`mingw32-make -C _build install`

Если процесс установки завершился корректно, то в папке `msys_directory/<префикс>/bin` появится исполняемый файл ephepm.exe. Иконка для создания ярлыка на рабочем столе может быть найдена в `msys_folder/<префикс>/share/icons/hicolor/256x256/apps/ephepm.ico`.

Также теперь доступен экспериментальный инсталлятор (см. релизы). 

## Зависимости

Для компиляции EphEPM используется сборочная система cmake. Кроме того вам также может потребоваться установить make или ninja.

Кроме того вам потребуются: [gtkmm-4.0](http://www.gtkmm.org/), [icu](https://icu.unicode.org/) (версия >= 69), [mathgl](http://mathgl.sourceforge.net/), [SOFA](https://iausofa.org/) (линкуется в большинстве случаев статически, поэтому для работы скорее всего не потребуется) и [gmp](https://gmplib.org/) (вам нужна библиотека gmpxx). Все библиотеки должны иметь заголовочные файлы (для компиляции, в работе программы не требуются), поэтому если вы например используете Debian Linux, вам потребуются ...-dev версии пакетов.

Если вы намереваетесь собрать EphEPM с поддержкой openmp, то вам также может потребоваться установить соответствующую библиотеку для используемого компилятора.

## Использование

Прежде всего вам необходимо скачать файлы [эфемерид](https://ftp.iaaras.ru/pub/epm/). Программа может работать только с вариантом SPICE в бинарном формате (расширения файлов .bsp и .bpc, последний вариант нужен исключительно для расчёта физической либрации Луны). Поддерживаются версии эфемерид с 2015 по 2021 (как "обычный" так и "длительный" варианты).

После загрузки эфемерид укажите путь к нужному файлу в соответствующем поле ввода программы. Затем введите необходимые параметры (для построения графика орбит достаточно ввода только даты и времени, график строится лишь для некоторых тел), после чего нажмите "Рассчитать координаты" или "Орбиты". Для расчёта либрации Луны требуется указать файл поправок TT-TDB (для эфемерид EPM может быть использован файл с эфемеридами планет) и непосредственно сам файл либрации.

В версии 2.0 добавлена экспериментальная поддержка эфемерид DE (соответствующие файлы можно скачать на сайте [NASA JPL](https://ssd.jpl.nasa.gov/ftp/eph/)). Программа тестировалась с версией эфемерид de441 (планеты, малые тела, физическая либрация Луны). Для расчётов необходим файл поправок TT-TDB (может быть использован файл эфемерид EPM или отдельный файл для эфемерид DE - находится в разделе planets на сайте NASA JPL).

## Лицензия

GPLv3 (см. файл `COPYING`).

## Помощь

Если есть желание и возможность, то вы можете помочь проекту [материально](https://yoomoney.ru/to/4100117795409573).

## Контакты для связи

Вы можете связаться с автором по email \
bobilev_yury@mail.ru